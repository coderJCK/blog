<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器渲染引擎 | chao</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/blog/favicon.ico">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2675818a983a3131404cee835018f016";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="记录个人笔记">
    <meta property="article:modified_time" content="2025-02-25T09:22:31.000Z">
    <meta property="og:site_name" content="chao">
    <meta property="og:title" content="浏览器渲染引擎">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://coderjck.github.io/blog//%E6%B5%8F%E8%A7%88%E5%99%A8/">
    <meta name="twitter:title" content="浏览器渲染引擎">
    <meta name="twitter:url" content="https://coderjck.github.io/blog//%E6%B5%8F%E8%A7%88%E5%99%A8/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="程序员, 编程, 计算机">
    <meta property="article:tag" content="程序员">
    <meta name="keywords" content="编程导航, 前端, 开发, 编程分享, 项目, IT, 求职, 面经">
    
    <link rel="preload" href="/blog/assets/css/0.styles.80609ca5.css" as="style"><link rel="preload" href="/blog/assets/js/app.fcc279a2.js" as="script"><link rel="preload" href="/blog/assets/js/2.7dddcc88.js" as="script"><link rel="preload" href="/blog/assets/js/96.9d3a49b3.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.17ea1209.js"><link rel="prefetch" href="/blog/assets/js/10.40b6837e.js"><link rel="prefetch" href="/blog/assets/js/11.78a8555f.js"><link rel="prefetch" href="/blog/assets/js/12.0b172d0b.js"><link rel="prefetch" href="/blog/assets/js/13.8352f638.js"><link rel="prefetch" href="/blog/assets/js/14.c7dc96c5.js"><link rel="prefetch" href="/blog/assets/js/15.970a8ca5.js"><link rel="prefetch" href="/blog/assets/js/16.ac3baac4.js"><link rel="prefetch" href="/blog/assets/js/17.c186ca40.js"><link rel="prefetch" href="/blog/assets/js/18.1cdd0514.js"><link rel="prefetch" href="/blog/assets/js/19.5740e4d6.js"><link rel="prefetch" href="/blog/assets/js/20.8885a4fa.js"><link rel="prefetch" href="/blog/assets/js/21.2a33c70e.js"><link rel="prefetch" href="/blog/assets/js/22.3e8347a6.js"><link rel="prefetch" href="/blog/assets/js/23.ceb5a5ff.js"><link rel="prefetch" href="/blog/assets/js/24.f357a927.js"><link rel="prefetch" href="/blog/assets/js/25.15e1f641.js"><link rel="prefetch" href="/blog/assets/js/26.35b2bbdc.js"><link rel="prefetch" href="/blog/assets/js/27.1422beee.js"><link rel="prefetch" href="/blog/assets/js/28.63df5c63.js"><link rel="prefetch" href="/blog/assets/js/29.32c003ec.js"><link rel="prefetch" href="/blog/assets/js/3.4dc033c7.js"><link rel="prefetch" href="/blog/assets/js/30.388c156d.js"><link rel="prefetch" href="/blog/assets/js/31.0e3a66d0.js"><link rel="prefetch" href="/blog/assets/js/32.0d1aba10.js"><link rel="prefetch" href="/blog/assets/js/33.5153c833.js"><link rel="prefetch" href="/blog/assets/js/34.2c624e4f.js"><link rel="prefetch" href="/blog/assets/js/35.16702df4.js"><link rel="prefetch" href="/blog/assets/js/36.71bf8b49.js"><link rel="prefetch" href="/blog/assets/js/37.4cd19f08.js"><link rel="prefetch" href="/blog/assets/js/38.24d06147.js"><link rel="prefetch" href="/blog/assets/js/39.e6dd4231.js"><link rel="prefetch" href="/blog/assets/js/4.2f502b73.js"><link rel="prefetch" href="/blog/assets/js/40.3213307a.js"><link rel="prefetch" href="/blog/assets/js/41.89825978.js"><link rel="prefetch" href="/blog/assets/js/42.74de04df.js"><link rel="prefetch" href="/blog/assets/js/43.df89ea13.js"><link rel="prefetch" href="/blog/assets/js/44.afd81b8b.js"><link rel="prefetch" href="/blog/assets/js/45.4eae50df.js"><link rel="prefetch" href="/blog/assets/js/46.8b830cd2.js"><link rel="prefetch" href="/blog/assets/js/47.99169ac9.js"><link rel="prefetch" href="/blog/assets/js/48.c7dfae08.js"><link rel="prefetch" href="/blog/assets/js/49.dc720e72.js"><link rel="prefetch" href="/blog/assets/js/5.7b1f056c.js"><link rel="prefetch" href="/blog/assets/js/50.bc943ee6.js"><link rel="prefetch" href="/blog/assets/js/51.9b52e6f4.js"><link rel="prefetch" href="/blog/assets/js/52.40b5f60c.js"><link rel="prefetch" href="/blog/assets/js/53.463d06dc.js"><link rel="prefetch" href="/blog/assets/js/54.36df7c5a.js"><link rel="prefetch" href="/blog/assets/js/55.59346199.js"><link rel="prefetch" href="/blog/assets/js/56.14bc18b9.js"><link rel="prefetch" href="/blog/assets/js/57.f71211e1.js"><link rel="prefetch" href="/blog/assets/js/58.c8e86665.js"><link rel="prefetch" href="/blog/assets/js/59.8abd84b7.js"><link rel="prefetch" href="/blog/assets/js/6.056886f1.js"><link rel="prefetch" href="/blog/assets/js/60.c48acff3.js"><link rel="prefetch" href="/blog/assets/js/61.5a117321.js"><link rel="prefetch" href="/blog/assets/js/62.250b7db6.js"><link rel="prefetch" href="/blog/assets/js/63.0330660f.js"><link rel="prefetch" href="/blog/assets/js/64.14f0c50a.js"><link rel="prefetch" href="/blog/assets/js/65.67f69a59.js"><link rel="prefetch" href="/blog/assets/js/66.b392c9b3.js"><link rel="prefetch" href="/blog/assets/js/67.c19a588a.js"><link rel="prefetch" href="/blog/assets/js/68.1d84f558.js"><link rel="prefetch" href="/blog/assets/js/69.a8206865.js"><link rel="prefetch" href="/blog/assets/js/7.a96cecf9.js"><link rel="prefetch" href="/blog/assets/js/70.af991e3d.js"><link rel="prefetch" href="/blog/assets/js/71.0295cc01.js"><link rel="prefetch" href="/blog/assets/js/72.74a8cefe.js"><link rel="prefetch" href="/blog/assets/js/73.4c8600cd.js"><link rel="prefetch" href="/blog/assets/js/74.ae1f92b6.js"><link rel="prefetch" href="/blog/assets/js/75.83344c44.js"><link rel="prefetch" href="/blog/assets/js/76.da77450f.js"><link rel="prefetch" href="/blog/assets/js/77.01d98c56.js"><link rel="prefetch" href="/blog/assets/js/78.7091c6e1.js"><link rel="prefetch" href="/blog/assets/js/79.9e184b1a.js"><link rel="prefetch" href="/blog/assets/js/80.613f1fb9.js"><link rel="prefetch" href="/blog/assets/js/81.2507de7c.js"><link rel="prefetch" href="/blog/assets/js/82.470aee7c.js"><link rel="prefetch" href="/blog/assets/js/83.af2893c5.js"><link rel="prefetch" href="/blog/assets/js/84.6bb657bb.js"><link rel="prefetch" href="/blog/assets/js/85.51c0b4d0.js"><link rel="prefetch" href="/blog/assets/js/86.11a9067a.js"><link rel="prefetch" href="/blog/assets/js/87.b476fc1d.js"><link rel="prefetch" href="/blog/assets/js/88.8ecbb814.js"><link rel="prefetch" href="/blog/assets/js/89.43940387.js"><link rel="prefetch" href="/blog/assets/js/90.735af5e4.js"><link rel="prefetch" href="/blog/assets/js/91.815c60a4.js"><link rel="prefetch" href="/blog/assets/js/92.6a9aa492.js"><link rel="prefetch" href="/blog/assets/js/93.b1687618.js"><link rel="prefetch" href="/blog/assets/js/94.1dd6f5ca.js"><link rel="prefetch" href="/blog/assets/js/95.cac1ef1c.js"><link rel="prefetch" href="/blog/assets/js/97.5d0e29e1.js"><link rel="prefetch" href="/blog/assets/js/98.05316c6d.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.33b2b47d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.80609ca5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="chao" class="logo"> <span class="site-name can-hide">chao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/其他/常用网址.html" class="nav-link">
  常用网址
</a></li><li class="dropdown-item"><!----> <a href="/blog/其他/常用命令.html" class="nav-link">
  常用命令
</a></li><li class="dropdown-item"><!----> <a href="/blog/其他/常用快捷键.html" class="nav-link">
  常用快捷键
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/前端/知识库.html" class="nav-link">
  知识库
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端/面试题.html" class="nav-link">
  面试题
</a></li></ul></div></div> <a href="https://github.com/coderJCK/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/其他/常用网址.html" class="nav-link">
  常用网址
</a></li><li class="dropdown-item"><!----> <a href="/blog/其他/常用命令.html" class="nav-link">
  常用命令
</a></li><li class="dropdown-item"><!----> <a href="/blog/其他/常用快捷键.html" class="nav-link">
  常用快捷键
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/前端/知识库.html" class="nav-link">
  知识库
</a></li><li class="dropdown-item"><!----> <a href="/blog/前端/面试题.html" class="nav-link">
  面试题
</a></li></ul></div></div> <a href="https://github.com/coderJCK/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>浏览器渲染引擎</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器渲染引擎" class="sidebar-link">浏览器渲染引擎</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器事件循环机制" class="sidebar-link">浏览器事件循环机制</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器中输入一个-url-并回车后-浏览器都经历了哪些步骤来呈现页面" class="sidebar-link">浏览器中输入一个 URL 并回车后，浏览器都经历了哪些步骤来呈现页面</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器渲染流程" class="sidebar-link">浏览器渲染流程</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#重绘-回流" class="sidebar-link">重绘 &amp; 回流</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器同源策略" class="sidebar-link">浏览器同源策略</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器存储" class="sidebar-link">浏览器存储</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器缓存策略" class="sidebar-link">浏览器缓存策略</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器缓存位置" class="sidebar-link">浏览器缓存位置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#service-worker" class="sidebar-link">Service Worker</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器兼容性问题" class="sidebar-link">浏览器兼容性问题</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content"><div style="width:100%"><div class="theme-default-content custom-content content__default"><h2 id="浏览器渲染引擎"><a href="#浏览器渲染引擎" class="header-anchor">#</a> 浏览器渲染引擎</h2> <ol><li>Trident（IE 浏览器）</li> <li>Gecko（Firefox ）</li> <li>Blink（Chrome、Opera ）</li> <li>WebKit（Safari）</li></ol> <h2 id="浏览器事件循环机制"><a href="#浏览器事件循环机制" class="header-anchor">#</a> 浏览器事件循环机制</h2> <ol><li>调用栈：
是存储函数调用的栈结构。当执行一个函数时，会将该函数压入栈中，函数执行完毕后，从栈中弹出（先进后出原则）。</li> <li>任务队列。
包括宏任务队列和微任务队列。宏任务如 setTimeout、setInterval、script（整体代码）、I/O 操作、UI rendering 等；微任务如 Promise.then、MutationObserver、process.nextTick（Node.js 环境）等。</li> <li>事件循环过程。
首先执行调用栈中的同步任务，当调用栈为空时，事件循环开始工作。
它会先检查微任务队列，如果有微任务，就将它们依次压入调用栈执行，直到微任务队列为空。
检查宏任务队列，取出一个宏任务放入调用栈执行，直到宏任务队列为空。
再次检查队列，重复上述过程，如此循环。</li></ol> <h2 id="浏览器中输入一个-url-并回车后-浏览器都经历了哪些步骤来呈现页面"><a href="#浏览器中输入一个-url-并回车后-浏览器都经历了哪些步骤来呈现页面" class="header-anchor">#</a> 浏览器中输入一个 URL 并回车后，浏览器都经历了哪些步骤来呈现页面</h2> <ol><li>DNS解析
当你输入一个 URL 并回车，浏览器首先要做的是把域名解析为对应的 IP 地址。因为计算机网络中，设备之间通信是基于 IP 地址的。</li> <li>TCP连接
拿到 IP 地址后，浏览器会通过 TCP 协议与服务器建立连接。TCP 是一种面向连接的、可靠的、字节流协议。“三次握手”</li> <li>HTTP请求
连接建立成功后，浏览器会根据 URL 中的信息构建一个 HTTP 请求报文，包含请求方法、请求头和请求体，然后将这个请求发送给服务器。</li> <li>服务器处理请求
服务器接收到请求后，会根据请求的内容进行相应的处理。</li> <li>HTTP响应
服务器将构建好的响应报文发送回浏览器。浏览器接收到响应后，首先会检查响应状态码，判断请求是否成功。</li> <li>浏览器渲染</li> <li>TCP连接关闭
页面渲染完成后，浏览器和服务器之间的 TCP 连接通常会根据 HTTP 协议的配置（如 Connection 头字段）决定是否关闭。如果是持久连接（Connection: keep - alive），连接会保持一段时间，以便后续的请求可以复用；如果是短连接（Connection: close），则会立即关闭连接。</li></ol> <h2 id="浏览器渲染流程"><a href="#浏览器渲染流程" class="header-anchor">#</a> 浏览器渲染流程</h2> <p>----渲染主线程来完成</p> <ol><li>解析。得到DOM和CSSOM树</li> <li>样式计算。生成带有样式的DOM树。
继承、源（开发样式、本地样式表、 默认样式）、选择器权重、次序等因素</li> <li>布局。生成布局树，主要是几何相关的属性。</li> <li>分层。对布局树分层，主要是堆叠相关的属性。
----合成线程来完成</li> <li>绘制。对每个层生成绘制指令。</li> <li>分块。对每个层进行分块。</li> <li>光栅化。对每个块生成位图。</li> <li>画。通过位图呈现效果</li></ol> <h2 id="重绘-回流"><a href="#重绘-回流" class="header-anchor">#</a> 重绘 &amp; 回流</h2> <ol><li>重绘。修改DOM样式，但未影响几何属性，直接回到绘制阶段即可。</li> <li>回流。修改DOM样式，影响几何属性，需要进行样式计算，并重新布局，相当于刷新页面。
几何相关的属性：
移动、删除、增加、修改节点尺寸等操作；
获取一些特定属性的值（offsetHeight、clientHeight...）；
手动调用getComputedStyle方法等；</li></ol> <h2 id="浏览器同源策略"><a href="#浏览器同源策略" class="header-anchor">#</a> 浏览器同源策略</h2> <ul><li>同源策略
就是指浏览器从一个源（协议、域名、端口三者相同）加载的资源，默认情况下是不能访问另一个源的资源的，这是为了保证用户信息的安全，防止不同源的脚本访问和操作其他源的敏感数据。</li> <li>解决跨域问题</li></ul> <ol><li>代理服务器。在开发环境中，可以使用 Webpack 等工具的代理功能，在生产环境中，可以使用 Nginx 等服务器软件配置反向代理。</li> <li>CORS。CORS 只需要服务端/后端支持即可，不涉及前端改动，依赖服务端/后端在响应头中添加 Access-Control-Allow-* 头。</li> <li>JsonP。JSONP 的原理很简单，就是利用 <em>script</em>标签没有跨域限制的漏洞。通过 <em>script</em>标签指向一个需要访问的地址并提供一个回调函数来接收数据。JSONP 使用简单且兼容性不错，但是只限于 get 请求。</li> <li>webSocket。webSocket本身不存在跨域问题，所以我们可以利用webSocket来进行非同源之间的通信</li> <li>postMessage、document.domain（不常用）</li></ol> <h2 id="浏览器存储"><a href="#浏览器存储" class="header-anchor">#</a> 浏览器存储</h2> <p>数据大小——有效期——作用域——用途</p> <ol><li>cookie
4kb
有效期/会话期（即关闭浏览器即失效）
当前域及其子域（每次都会携带在 header 中，对于请求性能影响）
保存用户登录状态、跟踪用户会话等；</li> <li>localStorage
5mb
永久存储
同源策略
适合存储仅在当前会话中使用的数据，如表单填写过程中的临时数据</li> <li>sessionStorage
5mb
会话期
同源策略
适合存储不经常变化且不需要发送到服务器的数据，如用户的个性化设置等</li> <li>indexedDB。
取决于硬盘空间
永久存储
同源策略
离线应用、大数据缓存等</li></ol> <h2 id="浏览器缓存策略"><a href="#浏览器缓存策略" class="header-anchor">#</a> 浏览器缓存策略</h2> <ol><li><p>强缓存</p> <p>  浏览器在加载资源时，先检查本地缓存中是否有该资源，并且该资源是否在有效期内。如果在有效期内，浏览器直接从缓存中加载资源，不会向服务器发送请求。
相关 HTTP 头字段</p> <ul><li><strong>Cache - Control</strong>：是 HTML5 开始支持的属性，优先级高于 Expires。例如，Cache - Control: max - age = 31536000 表示资源在 31536000 秒（1 年）内有效，在此期间浏览器直接从缓存读取资源。还可以有其他取值，如 no - cache 表示不使用强缓存，而是直接进入协商缓存流程；no - store 表示禁止浏览器和中间缓存存储任何版本的资源。</li> <li><strong>Expires</strong>：是 HTTP 1.0 时的规范，它指定一个绝对的过期时间点。例如，Expires: Thu, 01 Dec 2025 16:00:00 GMT，当浏览器请求时间在这个时间之前，就会使用缓存。但由于它是基于服务器时间，若服务器时间与客户端时间不一致，可能导致缓存判断失误，所以逐渐被 Cache - Control 替代。</li></ul></li> <li><p>协商缓存</p> <p>当强缓存失效（如缓存过期或 Cache - Control 设置为 no - cache）时，浏览器会向服务器发送请求，询问服务器该资源是否有更新。如果资源没有更新，服务器返回 304 Not Modified 状态码，浏览器则从本地缓存加载资源；如果资源有更新，服务器返回 200 OK 状态码及最新资源。
相关 HTTP 头字段：
<em>Last - Modified</em> 和 <em>If - Modified - Since</em>：服务器在响应头中使用 Last - Modified 字段告知浏览器该资源的最后修改时间，例如 Last - Modified: Thu, 14 Feb 2025 12:00:00 GMT。浏览器下次请求时，会在请求头中带上 If - Modified - Since 字段，其值为上次服务器返回的 Last - Modified 值。服务器接收到请求后，对比 If - Modified - Since 和资源实际的最后修改时间，如果一致则返回 304 Not Modified，否则返回最新资源及 200 OK。
<em>ETag</em> 和 <em>If - None - Match</em>：ETag 是服务器为资源生成的唯一标识，通常基于资源内容的哈希值等生成。例如，ETag: &quot;56789abcdef&quot;。浏览器下次请求时，在请求头中带上 If - None - Match 字段，值为上次服务器返回的 ETag。服务器对比 If - None - Match 和当前资源的 ETag，若一致则返回 304 Not Modified，否则返回最新资源及 200 OK。ETag 比 Last - Modified 更精确，因为即使文件修改时间相同，但内容不同时，ETag 也会不同。</p></li></ol> <h2 id="浏览器缓存位置"><a href="#浏览器缓存位置" class="header-anchor">#</a> 浏览器缓存位置</h2> <div class="language- extra-class"><pre><code>从缓存位置上来说分为四种，并且各自有优先级，当依次查找缓存且都没有命中的时候，才会去请求网络
</code></pre></div><ol><li>Service Worker
自由控制缓存哪些文件、如何匹配缓存、如何读取缓存，并且缓存是持续性的。
当 Service Worker 没有命中缓存的时候，我们需要去调用 fetch 函数获取数据。也就是说，如果我们没有在 Service Worker 命中缓存的话，会根据缓存查找优先级去查找数据。但是不管我们是从 Memory Cache 中还是从网络请求中获取的数据，浏览器都会显示我们是从 Service Worker 中获取的内容。</li> <li>Memory Cache
Memory Cache 也就是内存中的缓存，读取内存中的数据肯定比磁盘快。但是内存缓存虽然读取高效，可是缓存持续性很短，会随着进程的释放而释放。 一旦我们关闭 Tab 页面，内存中的缓存也就被释放了。
当我们访问过页面以后，再次刷新页面，可以发现很多数据都来自于内存缓存</li> <li>Disk Cache
Disk Cache 也就是存储在硬盘中的缓存，读取速度慢点，但是什么都能存储到磁盘中，比之 Memory Cache 胜在容量和存储时效性上。
在所有浏览器缓存中，Disk Cache 覆盖面基本是最大的。它会根据 HTTP Herder 中的字段判断哪些资源需要缓存，哪些资源可以不请求直接使用，哪些资源已经过期需要重新请求。并且即使在跨站点的情况下，相同地址的资源一旦被硬盘缓存下来，就不会再次去请求数据</li> <li>Push Cache
Push Cache 是 HTTP/2 中的内容，当以上三种缓存都没有命中时，它才会被使用。并且缓存时间也很短暂，只在会话（Session）中存在，一旦会话结束就被释放。
Push Cache 在国内能够查到的资料很少，也是因为 HTTP/2 在国内不够普及，但是 HTTP/2 将会是日后的一个趋势</li> <li>网络请求</li></ol> <h2 id="service-worker"><a href="#service-worker" class="header-anchor">#</a> Service Worker</h2> <ol><li>概念<br>
Service Worker 是运行在浏览器背后的独立线程，一般可以用来实现缓存功能。使用 Service Worker的话，传输协议必须为 HTTPS。因为 Service Worker 中涉及到请求拦截，所以必须使用 HTTPS 协议来保障安全。</li> <li>使用
注册 Service Worker
监听到 install 事件以后就可以缓存需要的文件，
用户访问时通过拦截请求的方式查询是否存在缓存，存在缓存的话就可以直接读取缓存文件，否则就去请求数据。</li></ol> <p>代码实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span>serviceWorker
    <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'sw.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'service worker 注册成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'servcie worker 注册失败'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// sw.js</span>
<span class="token comment">// 监听 `install` 事件，回调中缓存所需文件</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'install'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'my-cache'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cache</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./index.html'</span><span class="token punctuation">,</span> <span class="token string">'./index.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 拦截所有请求事件</span>
<span class="token comment">// 如果缓存中已经有请求的数据就直接用缓存，否则去请求数据</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'fetch'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>
    caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> response
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fetch source'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="浏览器兼容性问题"><a href="#浏览器兼容性问题" class="header-anchor">#</a> 浏览器兼容性问题</h2> <ol><li>HTML5
一些新增的HTML5在某些浏览器中不支持</li> <li>CSS样式兼容性
旧版本的 Internet Explorer 对 CSS3 属性（如 border - radius、box - shadow 等）支持不佳。解决方法可以使用 CSS 前缀，如 -webkit -（Chrome、Safari）、-moz -（Firefox）、-ms -（IE）等</li> <li>JS兼容性
IE 浏览器早期使用 attachEvent 方法绑定事件，而现代浏览器使用 addEventListener。</li></ol> <p>检测是否支持</p> <ol><li>HTML5检测
对于 API 方法：可以通过检查全局对象是否存在该方法来检测。例如，检测浏览器是否支持 localStorage，可以使用<div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'localStorage'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 支持 localStorage */</span> <span class="token punctuation">}</span>。
    <span class="token comment">//对于新的 HTML 元素：可以创建该元素并检查其是否存在。例如，检测 canvas 元素支持情</span>
<span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 支持 canvas */</span> <span class="token punctuation">}</span>。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li>CSS3检测
使用 Modernizr：它是一个 JavaScript 库，可以检测浏览器对各种 CSS3 和 HTML5 特性的支持情况。引入 Modernizr 库后，会在 html 元素上添加相应的类名来表示支持或不支持某个特性，如 no - border - radius 表示不支持 border - radius 属性。</li></ol></div> <footer class="page-edit" style="margin:0;"><div class="edit-link"><a href="https://github.com/coderJCK/blog/edit/master/前端/面试题/浏览器.md" target="_blank" rel="noopener noreferrer">在线编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最近更新:</span> <span class="time">2/25/2025, 5:22:31 PM</span></div></footer> <!----></div> <div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:86vh"><div style="font-weight:bold;">浏览器渲染引擎</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器渲染引擎" class="toc-sidebar-link">浏览器渲染引擎</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器事件循环机制" class="toc-sidebar-link">浏览器事件循环机制</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器中输入一个-url-并回车后-浏览器都经历了哪些步骤来呈现页面" class="toc-sidebar-link">浏览器中输入一个 URL 并回车后，浏览器都经历了哪些步骤来呈现页面</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器渲染流程" class="toc-sidebar-link">浏览器渲染流程</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#重绘-回流" class="toc-sidebar-link">重绘 &amp; 回流</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器同源策略" class="toc-sidebar-link">浏览器同源策略</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器存储" class="toc-sidebar-link">浏览器存储</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器缓存策略" class="toc-sidebar-link">浏览器缓存策略</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器缓存位置" class="toc-sidebar-link">浏览器缓存位置</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#service-worker" class="toc-sidebar-link">Service Worker</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/blog/%E6%B5%8F%E8%A7%88%E5%99%A8/#浏览器兼容性问题" class="toc-sidebar-link">浏览器兼容性问题</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div>  <main class="footer"> <div class="copy-right"><span class="name"> 编程导航   |     </span> <a target="_blank" rel="noreferrer">
        
      </a></div></main></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.fcc279a2.js" defer></script><script src="/blog/assets/js/2.7dddcc88.js" defer></script><script src="/blog/assets/js/96.9d3a49b3.js" defer></script>
  </body>
</html>
